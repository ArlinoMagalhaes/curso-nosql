// Adiciona os produtos ao carrinho do utilizador com ID 1234
HMSET user:1234 produto: p1 '{" id ": "p1" , " nome ": "Camisa" , "preço": "25.00" , "quantidade": "2"}'

HMSET user:1234 produto: p2 '{"id ": "p2" , "nome": "Calça" , "preço":"35.00" , "quantidade": "1"}'

// Calcula o total do carrinho do utilizador com ID 1234

EVAL "local total = 0; for i, v in ipairs ( redis.call('HVALS' , KEYS[1]) ) do local produto = cjson.decode (v); total = total + produto.preco * produto.quantidade;
end; 
return total;"
1 user:1234

// Retorna os produtos do carrinho do utilizador com ID 1234
HGETALL user :1234
